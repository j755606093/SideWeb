<!DOCTYPE html>
<html>

<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
  <meta content="IE=edge" http-equiv="X-UA-Compatible" />
  <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport" />
  <meta name="format-detection" content="telephone=no, email=no" />
  <!-- <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
  <title>揭西大巴订票平台--乘务员</title>
</head>

<body>
  <div id="app" v-show="ready" style="display: none;">
    <!-- 头部 -->
    <header :class="{code:!haveId}">
      <span v-if="haveId" v-text="'已验票乘客('+checkedNum+'/'+optionsPassenger.length+')'"></span>
      <span v-else>乘务员验证码验票</span>
    </header>
    <div class="nothing"></div>
    <div v-if="haveId" class="body">
      <div class="action-body">
        <!-- 票信息 -->
        <div class="ticket-info">
          <div class="left">
            <span v-text="OrderDetail.Boardtime">08:23</span>
            <span v-text="OrderDetail.CoName">东方快车</span>
            <span>{{OrderDetail.Route}}</span>
          </div>
          <div class="center">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
          </div>
          <div class="right">
            <div class="top">
              <div class="name">
                <p>{{OrderDetail.StartPoint}}</p>
                <p>{{OrderDetail.EndPoint}}</p>
              </div>
              <div class="info"></div>
            </div>
            <div class="bottom">
              <img src="../picture/time.png">
              <p>{{OrderDetail.Boarddate+" "+OrderDetail.Boardtime}}</p>
            </div>
          </div>
        </div>
        <!-- 乘客信息 -->
        <div class="passenger-info">
          <div class="passenger-selected">
            <div @click="selectUp(index)" :class="{line:true,vaild:item.vaild,active:item.active}" v-for="(item,index) in optionsPassenger">
              <div v-if="!item.checked">
                <img src="../picture/select.png"><span></span>
              </div>
              <div style="color:#f35252" v-else>已验票</div>
              <span class="center">{{item.Name}}</span>
              <span class="right">{{item.Mobile?item.Mobile:'无'}}</span>
            </div>
            <div @click="selectAll" :class="{line:true,active:Passengers.length===optionsPassenger.length-checkedNum}">
              <div><img src="../picture/select.png"><span></span></div>
              <span class="center">全选验证</span>
              <span class="right"></span>
            </div>
          </div>
        </div>
        <div class="line-other">
          <div>
            <p></p>
          </div>
          <span class="center">其它信息</span>
          <div>
            <p></p>
          </div>
        </div>
        <!-- 手机号 -->
        <div class="write-info">
          <div class="line">
            <span style="color:rgb(20,20,20)">{{OrderDetail.Linkmanid+' (联系号码)'}}</span>
            <div class="img"><img src="../picture/phone.png"></div>
          </div>
        </div>
        <!-- 上车点备注 -->
        <div class="write-info">
          <div class="line">
            <span style="color:rgb(20,20,20)">{{OrderDetail.Remark?OrderDetail.Remark:OrderDetail.StartAddress}}</span>
            <div class="img"><img src="../picture/green_station.png"></div>
          </div>
        </div>
        <!-- 旅行备注 -->
        <div class="write-info">
          <div class="line">
            <span style="color:rgb(20,20,20)">{{OrderDetail.JourneyRmk?OrderDetail.JourneyRmk:'系统默认备注'}}</span>
            <div class="img"><img src="../picture/edit.png"></div>
          </div>
        </div>
        <!-- 订单信息 -->
        <div class="pay-ticket-info">
          <p>订单信息</p>
          <p>订单编号:{{OrderDetail.Id}}</p>
          <p>下单日期:{{OrderDetail.CTime}}</p>
        </div>
      </div>
    </div>
    <!-- 没有订单号参数的页面 -->
    <div v-else v-show="ready" style="display: none;" class="codebody">
      <div class="input">
        <div :class="{'input-code':true,first:inputCodeNum===0,last:inputCodeNum===5}" :style="{left:left}">
          <input id="inputcode" type="tel" @keyup="inputCodeEvent($event)" v-model="inputCode" autofocus maxlength="1" @keyup.delete="backInput" name="input1">
        </div>
        <span v-text="codeArray[0]?codeArray[0]:''" class="first"></span>
        <span v-text="codeArray[1]?codeArray[1]:''"></span>
        <span v-text="codeArray[2]?codeArray[2]:''"></span>
        <span v-text="codeArray[3]?codeArray[3]:''"></span>
        <span v-text="codeArray[4]?codeArray[4]:''"></span>
        <span class="last" v-text="codeArray[5]?codeArray[5]:''"></span>
      </div>
      <p>6位数验证码</p>
      <button @click="verifyCode">验证</button>
    </div>
    <!-- 选择需要查看的订单 -->
    <div v-if="myModal" class="my-modal">
      <div class="modal-body">
        <div class="order-list">
          <p>验证码有相同的情况,请验证乘车人的取票人的手机号码~</p>
          <div @click="selectOrderAction(index)" class="line" v-for="(item,index) in AllOrder">
            <div class="img">
              <img v-if="selectOrderIndex===index" src="../picture/select.png">
              <span></span>
            </div>
            <div class="center">
              <p>{{item.Linkmanid}}</p>
            </div>
          </div>
        </div>
        <button @click="getOrder">选择</button>
      </div>
    </div>
    <footer v-if="haveId">
      <div class="price">
        <span>订单单价</span>
        <span>¥150</span>
      </div>
      <div class="yes">
        <button @click="yes">确定乘客</button>
      </div>
    </footer>
  </div>
  <script src="./bundle-steward.js"></script>
</body>

</html>
