<!DOCTYPE html>
<html lang="en">

<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
  <meta content="IE=edge" http-equiv="X-UA-Compatible" />
  <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport" />
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <title>我的</title>
</head>

<body>
  <div id="app" v-show="ready" style="display: none;">
    <!-- 头部 -->
    <header v-show="showHeader">
      <div @click="GoBack" class="left">
        <i class="fa fa-angle-left"></i>
      </div>
      <div class="home">
        <span v-text="headerTitle"></span>
      </div>
    </header>
    <div class="body">
      <!-- 头部 -->
      <div class="header">
        <div class="left content">
          <img :src="UserInfo.Headimgurl">
        </div>
        <div class="center content">
          <p v-text="UserInfo.Nickname"></p>
          <span v-text="UserInfo.Mobile?UserInfo.Mobile:UserInfo.Province+UserInfo.City"></span>
        </div>
        <div class="right" @click="showUserInfo">
          <i class="fa fa-angle-right"></i>
        </div>
      </div>
      <!-- 订单和优惠券 -->
      <div class="order-discount">
        <div @click="showOrderList()" class="left content">
          <img src="./picture/order_red.png">
          <span>全部订单</span>
        </div>
        <div @click="showDiscountList" class="right content">
          <img src="./picture/discount_red.png">
          <span>优惠券</span>
        </div>
      </div>
      <!-- 其中的列表 -->
      <div class="lists">
        <!-- 单个或多个选项 -->
        <div class="list-body">
          <!-- 单个 -->
          <div class="list" @click="showPassengerList">
            <i class="left fa fa-user"></i>
            <span>常用联系人</span>
            <i class="fa fa-chevron-right"></i>
          </div>
        </div>
        <!-- 单个或多个选项 -->
        <div class="list-body">
          <div class="list" @click="applyRefund">
            <i class="left fa  fa-rebel"></i>
            <span>申请退款</span>
            <i class="fa fa-chevron-right"></i>
          </div>
          <!-- 单个 -->
          <a class="list" href="tel:13871895108">
            <i class="left fa fa-pencil-square"></i>
            <span>联系客服</span>
            <i class="fa fa-chevron-right"></i>
          </a>
          <!-- 单个 -->
          <div class="list">
            <i class="left fa fa-question-circle"></i>
            <span>帮助中心</span>
            <i class="fa fa-chevron-right"></i>
          </div>
        </div>
      </div>
    </div>
    <!-- 全部订单信息 -->
    <mt-popup v-model="orderVisible" position="right" id="order-lists" class="order-lists">
      <div class="lists">
        <div class="order-lists-header">
          <span @click="showOrderList()" :class="UseOrderType===0?'active':''">全部</span>
          <span @click="showOrderList(1)" :class="UseOrderType===1?'active':''">未支付</span>
          <span @click="showOrderList(2)" :class="UseOrderType===2?'active':''">已支付</span>
          <span @click="showOrderList(3)" :class="UseOrderType===3?'active':''">待出行</span>
        </div>
        <!-- 订单 -->
        <div class="list" @click="openOrder(index)" v-for="(item,index) in OrderList">
          <!-- 订单头部 -->
          <div class="list-header">
            <span class="time" v-text="'订单号:'+item.Id">1月16日 22:25</span>
            <span class="type" v-text="item.Route">高铁大巴</span>
          </div>
          <!-- 订单中间 -->
          <div class="list-center">
            <div class="city">
              <span class="start" v-text="item.StartPoint">揭阳</span>
              <i class="start-time" v-text="item.Boardtime.slice(0,5)">12:50</i>
              <span class="end" v-text="item.EndPoint">广州</span>
            </div>
            <span class="money" v-text="'¥'+item.TotalPrice">¥402</span>
          </div>
          <div class="list-footer">
            <span class="name" v-text="'乘车日期:'+item.Boarddate">岳飞</span>
            <template v-if="item.Status===0">
              <span class="order-pay order-no">订单失效</span>
            </template>
            <template v-else>
              <span class="order-pay order-paying" v-if="item.IsPay===0">未支付</span>
              <span class="order-pay order-payed" v-else>已支付</span>
            </template>
          </div>
        </div>
        <div id="last"></div>
      </div>
    </mt-popup>
    <!-- 优惠券 -->
    <mt-popup v-model="discountVisible" position="right" id="discount-lists" class="discount-lists">
      <div class="lists">
        <!-- 列表 -->
        <div class="list" v-for="(item,index) in Rebate">
          <div class="left">
            <img src="./picture/rebate.png">
          </div>
          <div class="center">
            <p v-text="item.Name"></p>
            <p>
              <span class="red little">¥</span>
              <span class="red big" v-text="item.Money"></span>
            </p>
            <span v-text="'截止:'+item.EndDate"></span>
            <span v-text="item.IsSingle"></span>
          </div>
          <div class="right">
            <a :href="'https://ticket.samecity.com.cn/wx/ticket.html?rebateid='+item.Id">立即使用</a>
            <!-- <a :href="'http://192.168.31.116:3000/getCustomPage?page=ticket&rebateid='+item.Id">立即使用</a> -->
          </div>
        </div>
      </div>
    </mt-popup>
    <!-- 申请退款 -->
    <mt-popup v-model="refundVisible" position="right" id="refund-lists" class="refund-lists">
      <div class="lists">
        <!-- 列表 -->
        <a class="list" v-for="(item,index) in RefundOrder.RefundList" :href="'https://ticket.samecity.com.cn/wx/TicketOrder.html?orderid='+item.OrderId">
          <div class="left">
            <div class="left-line">
              <span class="left-span">退款号:</span>
              <span class="nowrap" v-text="item.Id"></span>
            </div>
            <div class="left-line">
              <span class="left-span">退款理由:</span>
              <span class="nowrap" v-text="item.Remark"></span>
            </div>
            <div class="left-line">
              <span class="left-span">审核回复:</span>
              <span class="nowrap" v-text="item.Reply?item.Reply:'未回复'"></span>
            </div>
            <div class="left-line">
              <span class="left-span">申请状态:</span>
              <template v-if="item.Status===0">
                <span class="red">审核不过</span>
              </template>
              <template v-if="item.Status===1">
                <span class="blue">审核中</span>
              </template>
              <template v-if="item.Status===2">
                <span class="blue">审核通过待退款</span>
              </template>
              <template v-if="item.Status===3">
                <span class="blue">已退款</span>
              </template>
            </div>
          </div>
          <div class="right">
            <template v-if="item.Status===0">
              <img src="./picture/shenhebuguo.png" class="checking">
            </template>
            <template v-if="item.Status===1">
              <img src="./picture/shenhe.png" class="checking">
            </template>
            <template v-if="item.Status===2">
              <img src="./picture/shenhetongguo.png" class="checking">
            </template>
            <template v-if="item.Status===3">
              <img src="./picture/refund.png" class="checking">
            </template>
          </div>
        </a>
        <div id="last_refund"></div>
      </div>
    </mt-popup>
    <!-- 乘客 -->
    <mt-popup v-model="passengerVisible" position="right" id="passenger-lists" class="passenger-lists">
      <div class="lists">
        <!-- 列表 -->
        <div class="list" v-for="(item,index) in Passenger">
          <span class="passenger-name">{{item.Name}}</span>
          <span class="passenger-phone">{{item.Mobile}}</span>
          <div class="passenger-operate" @click="trashPassenger(index)">
            <i class="fa fa-trash"></i>
          </div>
        </div>
      </div>
      <!-- 增加乘客 -->
      <div class="info-man">
        <div class="info-man-name info">
          <span>乘客姓名:</span>
          <input type="text" placeholder="请填写真实姓名" v-model="passengerName">
        </div>
        <div class="info-man-card info">
          <span>联系手机:</span>
          <input type="text" placeholder="选填(可用于联系)" v-model="passengerPhone">
        </div>
      </div>
      <button @click="addPassenger" class="add-passenger"><i class="fa fa-plus-circle"></i>增加乘客</button>
    </mt-popup>
    <!-- 用户信息 -->
    <mt-popup v-model="userVisible" position="right" id="user-lists" class="user-lists">
      <div class="lists">
        <!-- 列表 -->
        <div class="info-man">
          <div class="info-man-line info">
            <span class="left">ID:</span>
            <span class="gray" v-text="UserInfo.Id"></span>
          </div>
        </div>
        <div class="info-man">
          <div class="info-man-line info">
            <span class="left">昵称:</span>
            <span class="gray" v-text="UserInfo.Nickname"></span>
            <div @click="edit(0)" class="right"><i class="fa fa-edit"></i></div>
          </div>
          <!-- <div class="info-man-line info">
            <span class="left">姓名:</span>
            <span class="gray" v-text="UserInfo.Name?UserInfo.Name:'未设置'"></span>
            <div @click="edit(1)" class="right"><i class="fa fa-edit"></i></div>
          </div> -->
          <div class="info-man-line info">
            <span class="left">绑定手机:</span>
            <span class="gray" v-text="UserInfo.Mobile?UserInfo.Mobile:'未设置'"></span>
            <div @click="edit(2)" class="right"><i class="fa fa-edit"></i></div>
          </div>
          <div class="info-man-line info">
            <span class="left">性别:</span>
            <span class="gray" v-text="UserInfo.Sex===1?'男':'女'"></span>
            <div @click="edit(3)" class="right"><i class="fa fa-edit"></i></div>
          </div>
        </div>
      </div>
    </mt-popup>
    <footer>
      <a href="./ticket.html" class="footer">
        <!-- <i class="fa fa-home"></i> -->
        <img src="./picture/ticket.png">
        <p>票务</p>
      </a>
      <a href="./TicketOrder.html" class="footer">
        <!-- <i class="fa fa-sticky-note"></i> -->
        <img src="./picture/cart_order.png">
        <p>订单</p>
      </a>
      <a href="./TicketUser.html" class="footer active">
        <!-- <i class="fa fa-user"></i> -->
        <img src="./picture/user_blue.png">
        <p>我的</p>
      </a>
    </footer>
  </div>
  <script src="./bundle-ticketuser.js"></script>
</body>

</html>
